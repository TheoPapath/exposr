% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/plot_decision_band.R
\name{plot_decision_band}
\alias{plot_decision_band}
\title{Plot Decision Band}
\usage{
plot_decision_band(
  data,
  exposure_var,
  response_var,
  group_var = NULL,
  efficacy_thresh,
  safety_thresh,
  dose_lines = NULL,
  smooth = TRUE,
  smooth_method = "loess",
  ci = TRUE,
  bin_exposure = FALSE,
  n_bins = 4,
  band_fill = "blue",
  band_alpha = 0.1,
  title = "Exposureâ€“Response with Decision Bands",
  x_lab = "Exposure",
  y_lab = "Response",
  predicted_var = NULL,
  facet_var = NULL,
  response_trans = NULL,
  log_x = FALSE,
  legend_title = NULL,
  highlight_doses = NULL
)
}
\arguments{
\item{data}{A data frame containing exposure-response data.}

\item{exposure_var}{Column name for exposure (x-axis).}

\item{response_var}{Column name for predicted or observed response (y-axis).}

\item{group_var}{Optional column used for coloring points (e.g., treatment group).}

\item{efficacy_thresh}{Numeric or vector; efficacy threshold(s).}

\item{safety_thresh}{Numeric or vector; safety threshold(s).}

\item{dose_lines}{Optional numeric vector of reference vertical lines (e.g., studied doses).}

\item{smooth}{Logical; if TRUE, overlay a smoothed trend line.}

\item{smooth_method}{Character; smoothing method for trend line (default = 'loess').}

\item{ci}{Logical; if TRUE, show a confidence ribbon.}

\item{bin_exposure}{Logical; if TRUE, bin exposure into quantiles.}

\item{n_bins}{Integer; number of bins when binning exposure.}

\item{band_fill}{Fill color for the decision band.}

\item{band_alpha}{Alpha level (transparency) for decision band.}

\item{title}{Plot title.}

\item{x_lab}{Label for the x-axis.}

\item{y_lab}{Label for the y-axis.}

\item{predicted_var}{Optional column name for predicted values to overlay.}

\item{facet_var}{Optional column name for faceting by subgroup.}

\item{response_trans}{Optional transformation function for response (e.g., 'log', 'logit').}

\item{log_x}{Logical; if TRUE, use log10 scale for x-axis.}

\item{legend_title}{Optional character string for the legend title.}

\item{highlight_doses}{Optional list of lists to highlight vertical dose regions (e.g., list(list(min=100, max=200))).}
}
\value{
A ggplot object.
}
\description{
Creates a decision band plot showing exposure-response data with overlaid efficacy
and safety thresholds. Useful for visualizing the range of exposures where efficacy
is acceptable and safety is not compromised.
}
\examples{
set.seed(123)
df <- data.frame(
  exposure = seq(1, 1000, length.out = 100),
  response = 100 / (1 + exp(-0.005 * (seq(0, 1000, length.out = 100) - 500))) + rnorm(100, 0, 5),
  group = rep(c("A", "B"), each = 50),
  pred = 100 / (1 + exp(-0.005 * (seq(0, 1000, length.out = 100) - 500)))
)
plot_decision_band(
  df,
  exposure_var = "exposure",
  response_var = "response",
  predicted_var = "pred",
  group_var = "group",
  efficacy_thresh = 60,
  safety_thresh = 90,
  dose_lines = c(100, 300, 600),
  log_x = TRUE,
  facet_var = "group",
  response_trans = NULL,
  bin_exposure = TRUE,
  band_fill = "lightblue",
  legend_title = "Group"
)
df <- data.frame(
  exposure = seq(0, 1000, length.out = 100),
  response = 100 / (1 + exp(-0.005 * (seq(0, 1000, length.out = 100) - 500))) + rnorm(100, 0, 5)
)
plot_decision_band(
  df,
  exposure_var = "exposure",
  response_var = "response",
  efficacy_thresh = 60,
  safety_thresh = 90,
  dose_lines = c(100, 300, 600)
)
}
